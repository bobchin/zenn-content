---
title: "KiCad まとめ"
emoji: "👌"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["KiCad"]
published: false
---

## プリント基盤作成の流れ

### 1. 回路図の作成

➔ 回路図エディター

### 2. 電気的に正しいかどうかチェック

➔ ERC: エレクトリカルルールチェッカー

### 3. シンボルにフットプリントを割り当て

### 4. 基板レイアウトの作成

➔ PCBエディター

### 5. 配線パターン設計

➔ PCBエディター

### 6. 配線パターンのチェック

➔ DRC: デザインルールチェッカー

### 7. 製造用データの出力

➔ ガーバーデータ・ドリルデータ



## 一通り実施してみる

### 1. 回路図の作成

- プロジェクト作成

- 回路図エディター
  - シンボルを配置
    - `Barrel Jack Switch`
    - `R`
    - `LED` 
  - 配線
    - `Barrel Jack の 1` => `R`
    - `R` => `LED アノード`
    - `LED カソード` => `Barrel Jack の 2`
    - `Barrel Jack の 3` => `✕`

### 2. 電気的に正しいかどうかチェック

- ERC(エレクトリカルルールチェッカー) 実行

### 3. シンボルにフットプリントを割り当て

- フットプリントの割り当て
  - Barrel Jack Switch: `BarrelJack_Horizontal`
  - R                 : `R_Axial_DIN0207_L6.3mm_D2.5mm_P7.62mm_Horizontal`
  - LED               : `LED_D5.0mm`

### 4. 基板レイアウトの作成

- PCB エディター
  - 基盤外形を設定
    - レイヤーを **Edge.Cuts** にする
    - グリッドを 5mm にする
    - 矩形を描画で、50mm x 50mm の正方形を作る
    - 起点位置を決める（左下位置）

### 5. 配線パターン設計

- PCB エディター
  - 部品の配置
    - 取り付け穴の追加
    - "回路図から基盤を更新" をして、フットプリントを基盤外形内に配置する
  - 配線をする
    - レイヤーを **F.Cu** または **B.Cu** にする
    - 片面実装の場合は、 **B.Cu** を使う
  - ベタグランドの配置
    - 外形から 1mm 内側を囲む
    - ベタ塗りする 

### 6. 配線パターンのチェック

- DRC(デザインルールチェッカー)実行
- 3D ビューワ で確認

### 7. 製造用データの出力

- 発注データの作成
  - PCB エディタ
    - [ファイル] -[プロット]
  - ガーバーデータ出力
    - レイヤー
      - F.Cu
      - B.Cu
      - F.SilkSCreen
      - B.SilkSCreen
      - F.Mask
      - B.Mask
      - Edge.Cuts
    - オプション
  - ドリルファイル出力
    - オプション

## レイヤー

| レイヤー名    | 役割                             |
| :----------- | :------------------------------- |
| F.Cu         | 表面の導体層                      |
| B.Cu         | 背面の導体層                      |
| F.SilkScreen | 表面のシルクスクリーン層           |
| B.SilkScreen | 裏面のシルクスクリーン層           |
| F.Mask       | 表面のマスク(ソルダーレジスト)層   |
| B.Mask       | 裏面のマスク(ソルダーレジスト)層   |
| Edge.Cuts    | 基盤の外形                       |
| F.Courtyard  | 表面の非配線領域層                |
| B.Courtyard  | 裏面の非配線領域層                |

- 導体層         : 実際に電流が流れる銅箔線
- ソルダーレジスト: 導体層を絶縁し、コーティングして保護する
- マスク         : はんだする部分 = ソルダーレジスト部分を取り除く部分
- シルクスクリーン: 表面のコーティングされた部分(文字や画像などを表示する部分)
- 非配線領域     : 配線時に、線がこの領域に入っているとエラーを出す

> ZEPエンジニアリング株式会社 KiCadではじめる プリント基板設計入門(https://www.zep.co.jp/nbeppu/article/z-kicad-da2/) より
![](https://storage.googleapis.com/zenn-user-upload/bee6ac062664-20251026.png =400x)

> アイオン株式会社 プリント基板とエッチング～プリント基板へのエッチング概論(https://www.aion-kk.co.jp/column/etching_vol3/) より
![](https://storage.googleapis.com/zenn-user-upload/b6b07a272e8a-20251026.png =400x)
*最後にこの上にレジストを乗せる*

## 設定類

- 制約(許容最小値)の設定
  - PCB エディタ
    - [ファイル] -[基盤の設定]
    - [デザインルール] - [制約]
- ネットクラス
  - PCB エディタ
    - [ファイル] -[基盤の設定]
      - [デザインルール] - [ネットクラス]

## サイズなど

- 銅箔の厚さ
  - 35μm
- 基材の厚さ
  - 1.6mm(通常)
    - 0.8mm
    - 1.0mm
    - 1.2mm

- 基材の種類

| 名称 | 基材 | 樹脂 | 規格 |
| ---- | ---- | ---- | ---- |
| 紙フェノール | 紙 | フェノール樹脂 | FR-1 |
| 紙フェノール | 紙 | フェノール樹脂 | FR-2 |
| 紙エポキシ | 紙 | エポキシ樹脂 | FR-3 |
| ガラスエポキシ | ガラス布 | エポキシ樹脂 | FR-4 |
| ガラスエポキシ | ガラス布 | エポキシ樹脂 | FR-5 |

- 許容電流
  経験則では、幅1mm => 1A

- 穴の大きさ
  - スルーホールの穴は、リード線 + 0.2mm 
  - はんだするパッドの大きさは、穴の大きさの2倍が基本
    - 手はんだする場合は大きめでもよい

## 部品の作成

- **シンボル** の作成
  - シンボルエディター
  - 新規ライブラリで自分が使用するシンボルをまとめておく
    - 名前は "00" で始めておくと使いやすい
    - 使用するシンボルをコピーしてこのフォルダに入れておく
    - プロジェクトにしておくとファイルがプロジェクト内にできて扱いやすい 
  - 新規ライブラリ
    - リファレンス識別子
    - 基本的にはピンを配置するだけ
    - 補助的に外形や目印などをデザインする
    - エレクトリカルタイプは、明示的ではない場合パッシブにしておく
    - 向きで方向を調整 

- **フットプリント** の作成
  - フットプリントエディター 
  - 新規ライブラリで自分が使用するシンボルをまとめておく
    - 名前は "00" で始めておくと使いやすい
    - 使用するシンボルをコピーしてこのフォルダに入れておく
    - プロジェクトにしておくとファイルがプロジェクト内にできて扱いやすい 
  - 新規ライブラリ
    - 生成ウィザードを使うと楽できる
      - IC などの DIP は、S-DIP を指定
      - ピン数・列数・ピッチなどを指定してすぐに作成できる  
    - グリッド原点を中央にしておく 
